spring.application.name=Api-Gateway

server.port=8080

eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

# User Service Routes
spring.cloud.gateway.routes.[0]id=user-service
spring.cloud.gateway.routes.[0]uri=lb://user-service
spring.cloud.gateway.routes.[0]predicates=Path=/api/users/**

# Product Service Routes
spring.cloud.gateway.routes.[1]id=product-service
spring.cloud.gateway.routes.[1]uri=lb://product-service
spring.cloud.gateway.routes.[1]predicates=Path=/api/products/**

# Order Service Routes
spring.cloud.gateway.routes.[2]id=order-service
spring.cloud.gateway.routes.[2]uri=lb://order-service
spring.cloud.gateway.routes.[2]predicates=Path=/orders/**

# Global CORS Configuration
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost:4201
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].exposed-headers=Authorization,Content-Type
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=3600

# Authentication Routes - NOTE: Auth endpoints (/api/auth/login, /api/auth/register, /api/auth/validate) 
# need to be implemented directly in the API Gateway as controllers since authentication was removed from user-service
# For now, this route is commented out until auth endpoints are created in the gateway
# spring.cloud.gateway.routes.[3]id=auth-service
# spring.cloud.gateway.routes.[3]uri=lb://user-service
# spring.cloud.gateway.routes.[3]predicates=Path=/api/auth/**
