<div class="dashboard-container">
  <div class="welcome-section" *ngIf="currentUser">
    <h1>Welcome back, {{ currentUser.name }}!</h1>
    <p class="welcome-subtitle">Ready to order some delicious food?</p>
  </div>
  <h1 *ngIf="!currentUser">Dashboard</h1>
  
  <mat-grid-list cols="3" rowHeight="200px" gutterSize="20px">
    <mat-grid-tile>
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-value">{{ cartItemCount }}</div>
          <div class="stat-label">Items in Cart</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-value">${{ totalCartValue.toFixed(2) }}</div>
          <div class="stat-label">Cart Value</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-value">{{ recentOrders.length }}</div>
          <div class="stat-label">Recent Orders</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>

  <div class="section">
    <h2>Featured Products</h2>
    <div class="products-grid" *ngIf="featuredProducts">
      <mat-card *ngFor="let product of featuredProducts.content" class="product-card">
        <mat-card-header>
          <mat-card-title>{{ product.name }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ product.description }}</p>
          <p class="price">${{ product.price }}</p>
          <mat-chip-list>
            <mat-chip [color]="product.available ? 'primary' : 'warn'">
              {{ product.available ? 'Available' : 'Out of Stock' }}
            </mat-chip>
          </mat-chip-list>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" [routerLink]="['/products', product.id]">View Details</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>

  <div class="section">
    <h2>Recent Orders</h2>
    <mat-card *ngIf="recentOrders.length === 0">
      <mat-card-content>
        <p>No orders yet.</p>
      </mat-card-content>
    </mat-card>
    <mat-table [dataSource]="recentOrders" *ngIf="recentOrders.length > 0">
      <ng-container matColumnDef="id">
        <mat-header-cell *matHeaderCellDef>Order ID</mat-header-cell>
        <mat-cell *matCellDef="let order">{{ order.id }}</mat-cell>
      </ng-container>
      
      <ng-container matColumnDef="orderDate">
        <mat-header-cell *matHeaderCellDef>Date</mat-header-cell>
        <mat-cell *matCellDef="let order">{{ order.orderDate | date }}</mat-cell>
      </ng-container>
      
      <ng-container matColumnDef="totalAmount">
        <mat-header-cell *matHeaderCellDef>Total</mat-header-cell>
        <mat-cell *matCellDef="let order">${{ order.totalAmount }}</mat-cell>
      </ng-container>
      
      <ng-container matColumnDef="status">
        <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
        <mat-cell *matCellDef="let order">
          <mat-chip>{{ order.status }}</mat-chip>
        </mat-cell>
      </ng-container>
      
      <mat-header-row *matHeaderRowDef="['id', 'orderDate', 'totalAmount', 'status']"></mat-header-row>
      <mat-row *matRowDef="let row; columns: ['id', 'orderDate', 'totalAmount', 'status']"></mat-row>
    </mat-table>
  </div>
</div>

